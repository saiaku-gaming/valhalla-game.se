<!-- _includes/base.html -->
{% assign base = '' %}
{% assign depth = page.url | split: '/' | size | minus: 1 %}
{% if    depth <= 1 %}{% assign base = '.' %}
{% elsif depth == 2 %}{% assign base = '..' %}
{% elsif depth == 3 %}{% assign base = '../..' %}
{% elsif depth == 4 %}{% assign base = '../../..' %}{% endif %}
<!DOCTYPE html>
<html lang="en-us">

  {% include head.html %}

  <body>
    <div id="status-div" style="position: absolute; right: 0">
      <span id="status-version"></span>
      <span id="status-state"></span>
      <span id="status-instances"></span>
    </div>
    {% include logo.html %}
    {% include menu.html %}
    <div class="outer-content">
    <a name="head-anchor"> </a>
		{% include nav-breadcrumbs.html %}
		<div class="main-content">
		  {{ content }}
		</div>
  </outer-content>
  
    <script>
      $.get('https://ymer.valhalla-game.com/v1/public-instance/get-fleets', (res) => {
        if(res) {
          const latestFleet = res.reduce((highestVersionFleet, fleet) => {
            if(!highestVersionFleet) {
              return fleet;
            }

            return highestVersionFleet.version > fleet.version ? highestVersionFleet : fleet;
          }, null)[0];

          $('#status-version').text(latestFleet.version);
          $('#status-state').text(latestFleet.status);
          $('#status-instances').text(latestFleet.instanceCount);
        }
      });    
    </script>
  </body>
</html>
