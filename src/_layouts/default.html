<!-- _includes/base.html -->
{% assign base = '' %}
{% assign depth = page.url | split: '/' | size | minus: 1 %}
{% if    depth <= 1 %}{% assign base = '.' %}
{% elsif depth == 2 %}{% assign base = '..' %}
{% elsif depth == 3 %}{% assign base = '../..' %}
{% elsif depth == 4 %}{% assign base = '../../..' %}{% endif %}
<!DOCTYPE html>
<html lang="en-us">

  {% include head.html %}

  <body>
    <div id="status-div" style="position: absolute; right: 10px; top: 10px; background-color: rgba(66,57,34,0.55); border: 1px solid #58658E;">
      <span id="status-version" style="color: white;"></span>
      <br />
      <span id="status-state" style="color: white;"></span>
      <br />
      <span id="status-instances" style="color: white;"></span>
    </div>
    {% include logo.html %}
    {% include menu.html %}
    <div class="outer-content">
    <a name="head-anchor"> </a>
		{% include nav-breadcrumbs.html %}
		<div class="main-content">
		  {{ content }}
		</div>
  </outer-content>
  
    <script>
      $.get('https://ymer.valhalla-game.com/v1/public-instance/get-fleets', (res) => {
        console.log(res);
        if(res) {
          console.log('2');
          const latestFleet = res.reduce((highestVersionFleet, fleet) => {
            console.log(fleet);
            if(!highestVersionFleet) {
              return fleet;
            }

            return highestVersionFleet.version > fleet.version ? highestVersionFleet : fleet;
          }, null);
          console.log(latestFleet);
          $('#status-version').text(`Version: ${latestFleet.version}`);
          $('#status-state').text(`Status: ${latestFleet.status}`);
          $('#status-instances').text(`Instances: ${latestFleet.instanceCount}`);
        }
      });    
    </script>
  </body>
</html>
